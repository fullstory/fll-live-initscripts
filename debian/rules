#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk

install/fll-live-initscripts::
	# fll-{reboot,halt} are the same script. duplicate it
	cp debian/fll-live-initscripts.fll-reboot.init \
		debian/fll-live-initscripts.fll-halt.init
	
	# install and configure runlevel seq. for our initscripts
	dh_installinit --no-start --name=fll-init-top	-- start 00 S .
	dh_installinit --no-start --name=fll-init-tail	-- start 99 S .
	dh_installinit --no-start --name=fll-locales	-- start 04 S .
	dh_installinit --no-start --name=fll-fstab	-- start 30 S .
	dh_installinit --no-start --name=fll-network	-- start 35 S .
	dh_installinit --no-start --name=fll-hwsetup	-- start 35 S .
	dh_installinit --no-start --name=fll-cpufreq	-- start 90 S .
	dh_installinit --no-start --name=fll-rootsh	-- start 90 S .
	dh_installinit --no-start --name=fll-adduser	-- start 90 S .
	dh_installinit --no-start --name=fll-xdm	-- start 95 S .
	dh_installinit --no-start --name=fll-desktop	-- start 95 S .
	
	# halt|reboot replacements
	dh_installinit --no-start --name=fll-halt	-- start 90 0 .
	dh_installinit --no-start --name=fll-reboot	-- start 90 6 .

clean::
	# clean up duplicated init script
	rm -f debian/fll-live-initscripts.fll-halt.init
